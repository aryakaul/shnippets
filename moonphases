#!/bin/bash

moon_file="$HOME/.cache/moon"

[ "$(stat -c %y $moon_file | cut -d' ' -f1)" != "$(date '+%y-%m-%d')" ] && 
    curl -s https://www.moongiant.com/phase/today > $moon_file

phase="$(grep "var jArray" $moon_file | grep -o -E "(Phase: <span>)(.*)(span)" | cut -f2 -d'<' | cut -f2 -d'>')"
[[ $phase == "Full Moon" ]] && emoji="ğŸŒ" ||
[[ $phase == "Waning Gibbous" ]] && emoji="ğŸŒ–" ||
[[ $phase == "Last Quarter" ]] && emoji="ğŸŒ—" ||
[[ $phase == "Waning Crescent" ]] && emoji="ğŸŒ˜" ||
[[ $phase == "New Moon" ]] && emoji="ğŸŒš" ||
[[ $phase == "Waxing Crescent" ]] && emoji="ğŸŒ’" ||
[[ $phase == "First Quarter" ]] && emoji="ğŸŒ“" ||
[[ $phase == "Waxing Gibbous" ]] && emoji="ğŸŒ–" 
echo "Moon Phase: $phase $emoji"
